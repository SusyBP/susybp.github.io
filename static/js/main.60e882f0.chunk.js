(this["webpackJsonpapi-web-client"]=this["webpackJsonpapi-web-client"]||[]).push([[0],{110:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(22),s=t.n(c),i=(t(81),t(9)),o=(t(82),t(32)),l=t(7),j=t(12),u=t(11),b=t.n(u),d=t(19),p=(t(57),t(73)),m=t(115),h=t(25),O=(t(60),t(1)),f="http://nayhanapl-001-site1.etempurl.com",x=function(e){var a=Object(r.useState)(""),t=Object(i.a)(a,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(i.a)(s,2),u=o[0],x=o[1],v=Object(l.f)(),N=Object(r.useState)({id:"",nombre:"",apellido:"",correo:"",direccion:"",numMovil:"",numFijo:"",provincia:"",token:""}),g=Object(i.a)(N,2),y=g[0],w=g[1],C=function(a){null!==a&&"undefined"!==typeof a&&(c(n),localStorage.setItem("user",JSON.stringify(a)),w(a),e.setUser(a))};function k(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(b.a.mark((function e(){var a,t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(h.sha256)(n),e.next=3,fetch("".concat(f,"/api/login?nombre=").concat(y.nombre,"&clave=").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 3:if(200===(t=e.sent).status){e.next=6;break}return e.abrupt("return",-1);case 6:return e.next=8,t.json();case 8:return r=e.sent,C(r),e.abrupt("return",0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(){var e=Object(d.a)(b.a.mark((function e(a){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.preventDefault(),x((function(e){return!e})),e.next=5,k();case 5:if(t=e.sent,x((function(e){return!e})),-1!==t){e.next=10;break}return alert("Nombre de usuario y/o contrase\xf1a inv\xe1lidos"),e.abrupt("return");case 10:v.push("/perfil"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),x((function(e){return!e})),alert("m\xe9todo Login/handlesubmmit: ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(a){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{children:[Object(O.jsx)("h3",{children:"Entrar"}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Nombre"}),Object(O.jsx)("input",{onChange:function(e){w((function(a){return Object(j.a)(Object(j.a)({},a),{},{nombre:e.target.value})}))},className:"form-control",type:"text",placeholder:"Nombre"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Contrase\xf1a"}),Object(O.jsx)("input",{onChange:function(e){c(e.target.value)},className:"form-control",type:"password",placeholder:"Contrase\xf1a"})]}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)(p.a,{onClick:P,className:"btn btn-primary btn-block",variant:"primary",children:[u&&Object(O.jsx)(m.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),u?"Espere...":"Entrar"]})})]})},v=t(116),N=t(117),g=t(118),y=t(119),w=t(76),C=(t(90),function(e){return Object(O.jsx)("div",{className:"formErrors",children:Object.keys(e.formErrors).map((function(a,t){return e.formErrors[a].length>0?Object(O.jsxs)("p",{children:[a," ",e.formErrors[a]]},t):""}))})}),k="http://nayhanapl-001-site1.etempurl.com",S=function(){var e=Object(r.useState)(!1),a=Object(i.a)(e,2),t=a[0],n=a[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],u=s[1],f=Object(r.useState)(""),x=Object(i.a)(f,2),S=x[0],P=x[1],E=Object(r.useState)({id:"",nombre:"",apellido:"",correo:"",direccion:"",numMovil:"",numFijo:"",provincia:"Provincia",token:""}),T=Object(i.a)(E,2),V=T[0],F=T[1],M=Object(r.useState)({email:"",password:"",cellphoneNum:"",landlineNum:"",address:"",confirmationPassword:""}),D=Object(i.a)(M,2),I=D[0],J=D[1],A=Object(r.useState)(!1),q=Object(i.a)(A,2),K=q[0],z=q[1],B=Object(r.useState)({isEmailValid:!1,isPasswordValid:!1,isConfirmationPasswordValid:!1}),L=Object(i.a)(B,2),R=L[0],U=L[1],G=Object(l.f)(),_=["La Habana","Mayabeque","Artemisa","Pinar del R\xedo","Matanzas"];function H(){return $.apply(this,arguments)}function $(){return($=Object(d.a)(b.a.mark((function e(){var a,t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o===S){e.next=5;break}return alert("Las contrase\xf1as no coinciden, rectifique"),P(""),e.abrupt("return",-1);case 5:return a=Object(h.sha256)(o),t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:V.nombre,apellido:V.apellido,numMovil:V.numMovil,numFijo:V.numFijo,correo:V.correo,provincia:V.provincia,"direcci\xf3n":V.direccion,clave:a})},e.next=9,fetch("".concat(k,"/api/persona"),t);case 9:return r=e.sent,e.next=12,r.json();case 12:return e.sent,e.abrupt("return",0);case 16:e.prev=16,e.t0=e.catch(0),alert(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}var Q=function(){var e=Object(d.a)(b.a.mark((function e(a){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n((function(e){return!e})),e.next=5,H();case 5:t=e.sent,n((function(e){return!e})),0===t&&G.push("/entrar"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),n((function(e){return!e})),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}(),W=function(e){var a=e.target.name,t=e.target.value;switch(a){case"name":F((function(e){return Object(j.a)(Object(j.a)({},e),{},{nombre:t})}));break;case"lastName":F((function(e){return Object(j.a)(Object(j.a)({},e),{},{apellido:t})}));break;case"cellphoneNum":F((function(e){return Object(j.a)(Object(j.a)({},e),{},{numMovil:t})}));break;case"landlineNum":F((function(e){return Object(j.a)(Object(j.a)({},e),{},{numFijo:t})}));break;case"email":F((function(e){return Object(j.a)(Object(j.a)({},e),{},{correo:t})}));break;case"address":F((function(e){return Object(j.a)(Object(j.a)({},e),{},{direccion:t})}));break;case"password":u(t);break;case"confirmationPassword":P(t)}X(a,t),console.log(K)},X=function(e,a){var t=I,r=R.isEmailValid,n=R.isPasswordValid,c=R.isConfirmationPasswordValid;switch(e){case"email":var s=a.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i);r=null!==s&&s.length>0,t.email=r?"":" is invalid";break;case"password":n=a.length>=6,t.password=n?"":" is too short";break;case"confirmationPassword":c=o===a,t.confirmationPassword=c?"":"password and confirmation do not match"}J(t),U({isEmailValid:r,isPasswordValid:n,isConfirmationPasswordValid:c}),Y()},Y=function(){console.log("validations.isEmailValid: ".concat(R.isEmailValid,", validations.isPasswordValid: ").concat(R.isPasswordValid),"validations.isConfirmationPasswordValid: ".concat(R.isConfirmationPasswordValid)),z(R.isEmailValid&&R.isPasswordValid&&R.isConfirmationPasswordValid)};return Object(O.jsxs)(v.a,{children:[Object(O.jsx)(C,{formErrors:I}),Object(O.jsxs)("form",{className:"container",onSubmit:Q,children:[Object(O.jsx)("h3",{children:"Registrarse"}),Object(O.jsxs)(N.a,{children:[Object(O.jsx)(g.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Nombre"}),Object(O.jsx)("input",{name:"name",onChange:W,className:"form-control",type:"text",placeholder:"Nombre"})]})}),Object(O.jsx)(g.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Apellidos"}),Object(O.jsx)("input",{name:"lastName",onChange:W,className:"form-control",type:"text",placeholder:"Apellidos"})]})})]}),Object(O.jsxs)(N.a,{children:[Object(O.jsx)(g.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Correo"}),Object(O.jsx)("input",{name:"email",onChange:W,className:"form-control",type:"email",placeholder:"Correo"})]})}),Object(O.jsx)(g.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Direcci\xf3n"}),Object(O.jsx)("input",{name:"address",onChange:W,className:"form-control",type:"text",placeholder:"Direcci\xf3n"})]})})]}),Object(O.jsxs)(N.a,{children:[Object(O.jsx)(g.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"N\xfamero M\xf3vil"}),Object(O.jsx)("input",{name:"cellphoneNum",onChange:W,className:"form-control",type:"text",placeholder:"N\xfamero M\xf3vil"})]})}),Object(O.jsx)(g.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"N\xfamero Fijo"}),Object(O.jsx)("input",{name:"landlineNum",onChange:W,className:"form-control",type:"text",placeholder:"N\xfamero Fijo"})]})}),Object(O.jsx)(g.a,{sm:4,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Provincia"}),Object(O.jsx)(y.a,{onSelect:function(e){var a=_[e];F((function(e){return Object(j.a)(Object(j.a)({},e),{},{provincia:a})}))},id:"dropdown-basic-button",title:V.provincia,children:_.map((function(e,a){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w.a.Item,{eventKey:a,children:e},a),a<_.length&&Object(O.jsx)(w.a.Divider,{})]})}))})]})})]}),Object(O.jsxs)(N.a,{children:[Object(O.jsx)(g.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Contrase\xf1a"}),Object(O.jsx)("input",{name:"password",value:o,onChange:W,className:"form-control",type:"password",placeholder:"Contrase\xf1a"})]})}),Object(O.jsx)(g.a,{sm:6,children:Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Confirmar contrase\xf1a"}),Object(O.jsx)("input",{name:"confirmationPassword",value:S,onChange:W,className:"form-control",type:"password",placeholder:"Confirmar contrase\xf1a"})]})})]}),Object(O.jsxs)(p.a,{disabled:!K,onClick:Q,className:"btn btn-primary btn-block",variant:"primary",children:[t&&Object(O.jsx)(m.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),t?"Espere...":"Registrarme"]})]})]})},P=t(121),E=t(120),T=t(122),V=t(123),F="http://nayhanapl-001-site1.etempurl.com",M=function(){var e=Object(r.useState)([]),a=Object(i.a)(e,2),t=a[0],n=a[1],c=Object(l.f)();function s(){return(s=Object(d.a)(b.a.mark((function e(){var a,t,r,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==(a=localStorage.getItem("user"))){e.next=5;break}return c.push("/entrar"),e.abrupt("return");case 5:return t=JSON.parse(a),r=Object(i.a)(t,1),a=r[0],e.next=10,fetch("".concat(F,"/GetTablaTrueque?id=").concat(a.id),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 10:if(200===(s=e.sent).status){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,s.json();case 15:o=e.sent,n(o),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),alert(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return function(){s.apply(this,arguments)}(),function(){}}),[]),null===t||void 0===t?void 0:t.map((function(e,a){return Object(O.jsx)(T.a,{children:Object(O.jsxs)(V.a,{children:[Object(O.jsx)(V.a.Header,{children:Object(O.jsx)(T.a.Toggle,{as:p.a,variant:"link",eventKey:"".concat(a),children:" ".concat(e.fecha," ").concat(e.tipo)})}),Object(O.jsx)(T.a.Collapse,{eventKey:"".concat(a),children:Object(O.jsxs)(V.a.Body,{children:[e.pro&&"Propongo: "+e.pro,Object(O.jsx)("br",{}),e.bus&&"Busco: "+e.bus]})})]})})}))},D=function(){var e=Object(l.f)(),a=Object(r.useState)({nombre:"",apellido:"",correo:"",direccion:"",provincia:"",numMovil:"",numFijo:""}),t=Object(i.a)(a,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){try{var a=localStorage.getItem("user");if(null!==a){var t=JSON.parse(a),r=Object(i.a)(t,1)[0];c(r)}}catch(n){alert("Profile/useEffect hook: ".concat(n)),e.push("/entrar")}}),[]),Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{children:Object(O.jsx)(g.a,{children:Object(O.jsxs)(P.a,{defaultActiveKey:"personalData",id:"uncontrolled-tab-example",className:"mb-3",children:[Object(O.jsx)(E.a,{eventKey:"personalData",title:"Datos Personales",children:Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{children:Object(O.jsxs)(g.a,{children:[Object(O.jsx)("h5",{children:"".concat(n.nombre," ").concat(n.apellido)}),n.correo&&Object(O.jsxs)("h6",{children:["Correo: ",n.correo]}),n.direccion&&Object(O.jsxs)("h6",{children:["Direcci\xf3n: ",n.direccion]}),n.numMovil&&Object(O.jsxs)("h6",{children:["Tel\xe9fono: ",n.numMovil]}),n.numFijo&&Object(O.jsxs)("h6",{children:["N\xfamero fijo: ",n.numFijo]}),n.provincia&&Object(O.jsxs)("h6",{children:["Provincia: ",n.provincia]})]})})})}),Object(O.jsx)(E.a,{eventKey:"misTrueques",title:"Mis Trueques",children:Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{children:Object(O.jsx)(g.a,{children:Object(O.jsx)(M,{})})})})})]})})})})};var I=function(){var e="http://nayhanapl-001-site1.etempurl.com",a=Object(r.useState)(""),t=Object(i.a)(a,2),n=t[0],c=t[1],s=Object(r.useState)(""),o=Object(i.a)(s,2),j=o[0],u=o[1],f=Object(r.useState)(!1),x=Object(i.a)(f,2),v=x[0],N=x[1],g=Object(l.f)();function y(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(b.a.mark((function a(){var t,r,c,s,o,l,u,d;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==(t=localStorage.getItem("user"))){a.next=4;break}return alert("Debe autenticarse para poder cambiar su contrase\xf1a"),a.abrupt("return");case 4:if(""!==n){a.next=7;break}return alert("Clave anterior incorrecta"),a.abrupt("return");case 7:if(r=JSON.parse(t),c=Object(i.a)(r,1),s=c[0],o=Object(h.sha256)(j),l=Object(h.sha256)(n),s.clave===l){a.next=14;break}return alert("El valor introducido en el campo Contrase\xf1a actual no coincide con su clave anterior"),a.abrupt("return");case 14:return u={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,clave:o})},a.next=17,fetch("".concat(e,"/SaveUpClave"),u);case 17:if(200===(d=a.sent).status){a.next=21;break}return alert("an error has occurred: ".concat(d.statusText)),a.abrupt("return");case 21:s.clave=o,localStorage.setItem("user",JSON.stringify(s)),alert("metodo ChangePass/changePassword: Su clave ha sido actualizada con \xe9xito. Debe volver a autenticarse"),k();case 25:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var C=function(){var e=Object(d.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),N((function(e){return!e})),e.next=4,y();case 4:N((function(e){return!e}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),k=function(){localStorage.clear(),g.push("/entrar")};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Cambiar contrase\xf1a"}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Contrase\xf1a actual"}),Object(O.jsx)("input",{onChange:function(e){c(e.target.value)},className:"form-control",type:"password",placeholder:"Contrase\xf1a anterior"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Nueva contrase\xf1a"}),Object(O.jsx)("input",{onChange:function(e){u(e.target.value)},className:"form-control",type:"password",placeholder:"Nueva contrase\xf1a"})]}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsxs)(p.a,{onClick:C,className:"btn btn-primary btn-block",variant:"primary",children:[v&&Object(O.jsx)(m.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),v?"Espere...":"Cambiar"]})})]})};var J=function(){var e=Object(l.f)(),a=Object(r.useState)(),t=Object(i.a)(a,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){try{var e=localStorage.getItem("user");if(null!==e){var a=JSON.parse(e),t=Object(i.a)(a,1)[0];c(t)}}catch(r){alert("metodo App/useEffect hook: ".concat(r))}}),[]),Object(O.jsx)(o.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("nav",{className:"navbar navbar-expand navbar-light fixed-top",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(o.b,{to:"/inicio",className:"navbar-brand",children:"Inicio"}),Object(O.jsx)("div",{className:"collapse navbar-collapse",children:Object(O.jsxs)("ul",{className:"navbar-nav ml-auto",children:[void 0===n&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(o.b,{className:"nav-link",to:"/entrar",children:"Entrar"})}),void 0===n&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(o.b,{className:"nav-link",to:"/registrarse",children:"Registrarse"})}),n&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(o.b,{className:"nav-link",to:"/perfil",children:"Perfil"})}),n&&Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsxs)(y.a,{id:"dropdown-basic-button",title:n.nombre?n.nombre:"usuario",children:[Object(O.jsx)(w.a.Item,{onClick:function(){localStorage.clear()},href:"/entrar",children:"Salir"}),Object(O.jsx)(w.a.Item,{onClick:function(){e.push("/cambiar_clave")},href:"/cambiar_clave",children:"Cambiar contrase\xf1a"})]})})]})})]})}),Object(O.jsx)("div",{className:"auth-wrapper",children:Object(O.jsx)("div",{className:"auth-inner",children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/inicio",children:Object(O.jsx)("h2",{children:"Bienvenido a Trueque!"})}),Object(O.jsx)(l.a,{exact:!0,path:"/entrar",children:Object(O.jsx)(x,{setUser:c})}),Object(O.jsx)(l.a,{exact:!0,path:"/registrarse",children:Object(O.jsx)(S,{})}),Object(O.jsx)(l.a,{exact:!0,path:"/perfil",children:Object(O.jsx)(D,{})}),Object(O.jsx)(l.a,{exact:!0,path:"/cambiar_clave",children:Object(O.jsx)(I,{})})]})})})]})})},A=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,124)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,c=a.getLCP,s=a.getTTFB;t(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root")),A()},60:function(e,a,t){},81:function(e,a,t){},82:function(e,a,t){}},[[110,1,2]]]);
//# sourceMappingURL=main.60e882f0.chunk.js.map